%% fixture_id: c4_dynamic_stress
%% purpose: stress test with many numbered interactions
C4Dynamic
  title Checkout Flow
  Person(user, "Customer")
  Container(web, "Web App", "React")
  Container(api, "API Gateway")
  Container(cart, "Cart Service")
  Container(order, "Order Service")
  Container(payment, "Payment Service")
  Container(inventory, "Inventory Service")
  Container(notify, "Notification Service")
  ContainerDb(db, "Database")
  Rel(user, web, "1. Clicks checkout")
  Rel(web, api, "2. POST /checkout")
  Rel(api, cart, "3. Get cart items")
  Rel(cart, db, "4. Read cart")
  Rel(api, inventory, "5. Reserve stock")
  Rel(inventory, db, "6. Update stock")
  Rel(api, order, "7. Create order")
  Rel(order, db, "8. Persist order")
  Rel(api, payment, "9. Charge card")
  Rel(payment, api, "10. Payment confirmed")
  Rel(api, order, "11. Confirm order")
  Rel(order, notify, "12. Send confirmation")
  Rel(notify, user, "13. Email receipt")
  Rel(api, web, "14. Return success")
